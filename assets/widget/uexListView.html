<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/index.css">

    <script type="text/javascript">
     var img1 = "http://f7.topit.me/7/c1/0f/119943606879e0fc17l.jpg";
     var img2 = "http://img5.duitang.com/uploads/item/201407/17/20140717215718_KGaJ3.jpeg";
     var img3 = "http://img5.duitang.com/uploads/item/201405/23/20140523214438_aUXPJ.thumb.700_0.jpeg";
     var img4 = "http://img4q.duitang.com/uploads/item/201406/17/20140617124749_HetWH.jpeg";
     var img5 = "http://img5.duitang.com/uploads/item/201410/25/20141025084654_WGZdr.thumb.700_0.jpeg";
     var img6 = "http://img5.duitang.com/uploads/item/201405/23/20140523212442_F8txe.thumb.700_0.jpeg";
    window.uexOnload = function() {

        uexListView.onItemClick = function(itemIndex) {
            alert(itemIndex);
        }

        uexListView.onLeftOptionButtonInItem = function(itemIndex, optionBtnIndex) {
            alert('左边第'+itemIndex+'行 bt'+optionBtnIndex);
        }

        uexListView.onRightOptionButtonInItem = function(itemIndex, optionBtnIndex) {
            alert('右边第'+itemIndex+'行 bt'+optionBtnIndex);
        }

        uexListView.ontPullRefreshHeaderListener = function(status) {
            switch(status) {
                case 0:
                    document.getElementById('stuts').innerHTML ="开始刷新";
                    break;
                case 1:
                    document.getElementById('stuts').innerHTML ="刷新中";
                    reloadItems();
                    break;
                case 2:
                    document.getElementById('stuts').innerHTML ="刷新完成";
                    break;
            }

        }

        uexListView.ontPullRefreshFooterListener = function(status) {
            switch(status) {
                case 0:
                    document.getElementById('stuts').innerHTML ="开始加载";
                    break;
                case 1:
                    document.getElementById('stuts').innerHTML ="加载中";
                    appendItems();
                    break;
                case 2:
                    document.getElementById('stuts').innerHTML ="加载完成";
                    break;
            }
        }

        uexListView.onCustomItemClick = function(data){
            alert("onCustomItemClick->" + data);
        }
        uexListView.onCustomPullRefreshHeader = function(data){
            alert("onCustomPullRefreshHeader->" + data);
        }
        uexListView.onCustomPullRefreshFooter = function(data){
            alert("onCustomPullRefreshFooter->" + data);
        }
        uexListView.onLeftClick = function(data){
            alert("onLeftClick->" + data);
        }
        uexListView.onRightClick = function(data){
            alert("onRightClick->" + data);
        }
        uexListView.onClick = function(data){
            alert("onClick->" + data);
        }
    }

    function start(){
        var width = window.screen.width;
        var height = window.screen.height - 200;
        var params = {
            "x": 0,
            "y": 200,
            "w":width,
            "h":height
        };

        var items = {
                "listItems":[
                           {
                           "image": "http://f7.topit.me/7/c1/0f/119943606879e0fc17l.jpg",
                           "placeholderImg":"res://1Normal.png",
                           "title": "标题",
                           "subtitle":"子标题",
                           "rightBtnImg": "res://ac_title_btn_hov.png",
                           "titleSize": 25,
                           "titleColor":"#006000",
                           "subtitleSize": 20,
                           "subtitleColor":"#000000",
                           "selectedBackgroundColor":"#006000",
                           "backgroundColor":"#FFFFFF",
                           "useCustomLayout":"1",
                           "height":200
                           },
                           {
                           "image": "http://img5.duitang.com/uploads/item/201407/17/20140717215718_KGaJ3.jpeg",
                           "placeholderImg":"res://1Normal.png",
                           "title": "标题",
                           "subtitle":"子标题",
                           "rightBtnImg": "res://ac_title_btn_hov.png",
                           "titleSize": 25,
                           "titleColor":"#006000",
                           "subtitleSize": 20,
                           "subtitleColor":"#000000",
                           "selectedBackgroundColor":"#006000",
                           "backgroundColor":"#FFFFFF",
                           "height":200
                           },
                           {
                           "image": "http://img5.duitang.com/uploads/item/201405/23/20140523214438_aUXPJ.thumb.700_0.jpeg",
                           "placeholderImg":"res://1Normal.png",
                           "title": "标题",
                           "subtitle":"子标题",
                           "rightBtnImg": "res://ac_title_btn_hov.png",
                           "titleSize": 25,
                           "titleColor":"#006000",
                           "subtitleSize": 20,
                           "subtitleColor":"#000000",
                           "selectedBackgroundColor":"#006000",
                           "backgroundColor":"#FFFFFF",
                           "height":200
                           }
                           ],
                   "rightSwipeOptionItem":{
                           "backgroundColor":"#ffffff",
                           "optionBtn":[
                                        {
                                        "btnIndex": "1",
                                        "text": "分享",
                                        "textColor":"#ffffff",
                                        "textSize":20,
                                        "bgColor":"#6F00D2"
                                        }
                                        ,
                                        {
                                        "btnIndex":"2",
                                        "text": "删除",
                                        "textColor":"#ffffff",
                                        "textSize": 20,
                                        "bgColor":"#6F00D2"
                                        }
                                        ]
                       },
                       "leftSwipeOptionItem":{
                           "backgroundColor":"#ffffff",
                           "optionBtn":[
                                        {
                                        "btnIndex": "1",
                                        "text": "分享",
                                        "textColor":"#ffffff",
                                        "textSize":20,
                                        "bgColor":"#6F00D2"
                                        },
                                        {
                                        "btnIndex":"2",
                                        "text": "删除",
                                        "textColor":"#ffffff",
                                        "textSize": 20,
                                        "bgColor":"#6F00D2"
                                        }
                                        ]
                           },
                };
        uexListView.setItemSwipeType(0);
        //setHeader();
        //setFooter();
        uexListView.setItems(JSON.stringify(items));
        uexListView.open(JSON.stringify(params));
    }

    function reloadItems() {
        var params = {
            "listItems":[
                       {
                       "image": "http://img4q.duitang.com/uploads/item/201406/17/20140617124749_HetWH.jpeg",
                       "placeholderImg":"res://1Normal.png",
                       "title": "标题",
                       "subtitle":"子标题",
                       "rightBtnImg": "res://ac_title_btn_hov.png",
                       "titleSize": 25,
                       "titleColor":"#0000ff",
                       "subtitleSize": 20,
                       "subtitleColor":"#000000",
                       "selectedBackgroundColor":"#006000",
                       "backgroundColor":"#FFFFFF",
                       "height":200
                       },
                       {
                       "image": "http://img5.duitang.com/uploads/item/201410/25/20141025084654_WGZdr.thumb.700_0.jpeg",
                       "placeholderImg":"res://1Normal.png",
                       "title": "标题",
                       "subtitle":"子标题",
                       "rightBtnImg": "res://ac_title_btn_hov.png",
                       "titleSize": 25,
                       "titleColor":"#0000ff",
                       "subtitleSize": 20,
                       "subtitleColor":"#000000",
                       "selectedBackgroundColor":"#006000",
                       "backgroundColor":"#FFFFFF",
                       "height":200
                       }
                       ]
        };
        uexListView.reloadItems(JSON.stringify(params));
    }


    function appendItems() {
        var params = {
                "listItems":[
                 {
                 "image": "http://img5.duitang.com/uploads/item/201405/23/20140523212442_F8txe.thumb.700_0.jpeg",
                 "placeholderImg":"res://1Normal.png",
                 "title": "标题",
                 "subtitle":"子标题",
                 "rightBtnImg": "res://ac_title_btn_hov.png",
                 "titleSize": 25,
                 "titleColor":"#006000",
                 "subtitleSize": 20,
                 "subtitleColor":"#000000",
                 "selectedBackgroundColor":"#006000",
                 "backgroundColor":"#FFFFFF",
                 "height":200
                 },
                 {
                 "image": "http://img5.duitang.com/uploads/item/201405/23/20140523212442_F8txe.thumb.700_0.jpeg",
                 "placeholderImg":"res://1Normal.png",
                 "title": "标题",
                 "subtitle":"子标题",
                 "rightBtnImg": "res://ac_title_btn_hov.png",
                 "titleSize": 25,
                 "titleColor":"#006000",
                 "subtitleSize": 20,
                 "subtitleColor":"#000000",
                 "selectedBackgroundColor":"#006000",
                 "backgroundColor":"#FFFFFF",
                 "height":200
                 }
                 ]
            };
            uexListView.appendItems(JSON.stringify(params));
    }

    function end() {
        uexListView.close("");
    }

    function edit() {
        uexListView.setEditingEnabled('true');
    }

    function cancel() {
        uexListView.setEditingEnabled('false');
    }

    function setHeader() {
        var params ={
           PullRefreshHeaderStyle:
           {
            "arrowImage":"res://1Normal.png",
            "backGroundColor":"#e2e7ed",
            "textColor":"#576c89",
            "textFontSize":20,
            "pullRefreshNormalText":"下拉可以刷新",
            "pullRefreshPullingText":"松开即可刷新",
            "pullRefreshLoadingText":"加载中...",
            "isShowUpdateDate":1
            }
        };
        uexListView.setPullRefreshHeader(JSON.stringify(params));
    }

    function setFooter() {
    var params ={
            PullRefreshFooterStyle:
            {
                "arrowImage":"res://1Normal.png",
                "backGroundColor":"#e2e7ed",
                "textColor":"#576c89",
                "textFontSize":13,
                "pullRefreshNormalText":"上拉加载更多",
                "pullRefreshPullingText":"松开即可加载更多",
                "pullRefreshLoadingText":"加载中...",
                "isShowUpdateDate":1
            }
        };
        uexListView.setPullRefreshFooter(JSON.stringify(params));
    }

    function insert() {
            var params ={
            "itemIndex":1,
            "listItem":{
                    "image": "http://www.iconpng.com/png/mapmarkers/marker_inside_azure.png",
                    "placeholderImg":"res://1Normal.png",
                    "title": "标题",
                    "subtitle":"子标题",
                    "rightBtnImg": "res://ac_title_btn_hov.png",
                    "titleSize": 25,
                    "titleColor":"#006000",
                    "subtitleSize": 20,
                    "subtitleColor":"#000000",
                    "selectedBackgroundColor":"#006000",
                    "backgroundColor":"#FFFFFF",
                    "height":200
                }
            };
        uexListView.insertItemAt(JSON.stringify(params));
    }

    function del() {
        var params = {
            "itemIndex":[0, 1, 2]
        };
        uexListView.deleteItemsAt(JSON.stringify(params));
    }

    function openCustom(){
        var w = window.screen.width;
        var h = window.screen.height;
        var top = 1000;
        var params = {
            left: 0,//(必选) 左间距
            top: top,//(必选) 上间距
            width:w,//(必选) 宽
            height:800,//(必选) 高
            swipeMode:2,//(可选) 侧滑模式，0-右滑，1-左滑，2-左右滑，3-不能滑。默认3
            offsetLeft:800,//(可选) swipeMode支持左滑时必选。左侧滑动距离。
            offsetRight:500,//(可选) swipeMode支持右滑时必选。右侧滑动距离。
            refreshMode:3,//(可选) 刷新模式，0-无，1-下拉，2-上拉，3-上拉下拉。默认3
            layout:{//(必选) 布局
                center:[
                    {
                        type:1,
                        src:"res://layout_type_1.xml"
                    },
                    {
                        type:2,
                        src:"res://layout_type_2.xml"
                    },
                    {
                        type:3,
                        src:"res://layout_type_3.xml"
                    }
                ],
                left:[
                    {
                        type:1,
                        src:"res://layout_left.xml"
                    }
                ],
                right:[
                    {
                        type:1,
                        src:"res://layout_right.xml"
                    }
                ]
            },
            data:[//列表数据
                {
                    center:{
                        type:1,
                        elementData:[
                            {
                                elementType:"text",
                                id:"txt1",
                                text:"测试数据1"
                            },
                            {
                                elementType:"text",
                                id:"txt2",
                                text:"right1"
                            }
                        ]
                    },
                    left:{
                        elementData:[
                            {
                                elementType:"button",
                                id:"btn1",
                                text:"lf1"
                            },
                            {
                                elementType:"button",
                                id:"btn2",
                                text:"lf2"
                            }
                        ]
                    }
                },
                {
                    center:{
                        type:3,
                        elementData:[
                            {
                                elementType:"img",
                                id:"img1",
                                imgSrc:img3
                            },
                            {
                                elementType:"text",
                                id:"btn1",
                                text:"type:3,data:1"
                            }
                        ]
                    }
                },
                {
                    center:{
                        type:2,
                        elementData:[
                            {
                                elementType:"text",
                                id:"txt1",
                                text:"text2-2"
                            },
                            {
                                elementType:"button",
                                id:"btn1",
                                text:"button2"
                            }
                        ]
                    }
                },
                {
                    center:{
                        type:3,
                        elementData:[
                            {
                                elementType:"img",
                                id:"img1",
                                imgSrc:img2
                            },
                            {
                                elementType:"text",
                                id:"btn1",
                                text:"type:3,data:2"
                            }
                        ]
                    }
                }
            ]
        };
        var data = JSON.stringify(params);
        uexListView.openCustom(data);
    }

    function setCustomItems(){
        var params = [//列表数据
                {
                    center:{
                        type:1,
                        elementData:[
                            {
                                elementType:"text",
                                id:"txt1",
                                text:"change1-1"
                            },
                            {
                                elementType:"text",
                                id:"txt2",
                                text:"change1"
                            }
                        ]
                    },
                    left:{
                        elementData:[
                            {
                                elementType:"button",
                                id:"btn1",
                                text:"lf11"
                            },
                            {
                                elementType:"button",
                                id:"btn2",
                                text:"lf21"
                            }
                        ]
                    }
                },
                {
                    center:{
                        type:2,
                        elementData:[
                            {
                                elementType:"text",
                                id:"txt1",
                                text:"change2-1"
                            },
                            {
                                elementType:"button",
                                id:"btn1",
                                text:"button11"
                            }
                        ]
                    },
                    right:{
                        elementData:[
                            {
                                elementType:"button",
                                id:"btn1",
                                text:"rt11"
                            },
                            {
                                elementType:"button",
                                id:"btn2",
                                text:"rt21"
                            }
                        ]
                    }
                },
                {
                    center:{
                        type:2,
                        elementData:[
                            {
                                elementType:"text",
                                id:"txt1",
                                text:"change2-2"
                            },
                            {
                                elementType:"button",
                                id:"btn1",
                                text:"button21"
                            }
                        ]
                    }
                },
                {
                    center:{
                        type:1,
                        elementData:[
                            {
                                elementType:"text",
                                id:"txt1",
                                text:"change1-2"
                            },
                            {
                                elementType:"text",
                                id:"txt2",
                                text:"change2"
                            }
                        ]
                    }
                }
            ];
        var data = JSON.stringify(params);
        uexListView.setCustomItems(data);
    }

    function closeCustom(){
        var params = {
        };
        var data = JSON.stringify(params);
        uexListView.closeCustom(data);
    }
    function insertCustomItem(){
        var index = document.getElementById("index").value;
        var params = {
            index:index,
            data:{
                center:{
                    type:1,
                    elementData:[
                        {
                            elementType:"text",
                            id:"txt1",
                            text:"insert1-1"
                        },
                        {
                            elementType:"text",
                            id:"txt2",
                            text:"change1"
                        }
                    ]
                },
                left:{
                    elementData:[
                        {
                            elementType:"button",
                            id:"btn1",
                            text:"lf111"
                        },
                        {
                            elementType:"button",
                            id:"btn2",
                            text:"lf21"
                        }
                    ]
                }
            }
        };
        var data = JSON.stringify(params);
        uexListView.insertCustomItem(data);
    }
    function updateCustomItem(){
        var index = document.getElementById("index").value;
        var params = {
            index:index,
            data:{
                center:{
                    type:1,
                    elementData:[
                        {
                            elementType:"text",
                            id:"txt1",
                            text:"update1-1"
                        },
                        {
                            elementType:"text",
                            id:"txt2",
                            text:"update1"
                        }
                    ]
                }
            }
        };
        var data = JSON.stringify(params);
        uexListView.updateCustomItem(data);
    }
    function deleteCustomItem(){
        var index = document.getElementById("index").value;
        var params = [index];
        var data = JSON.stringify(params);
        uexListView.deleteCustomItem(data);
    }
</script>
</head>

<body>
<div class="tit">uexListView</div>
<div>
    <input type="button" value="打开" onclick=start()>
    <input type="button" value="关闭" onclick=end()>
    <input type="button" value="插入" onclick=insert()>
    <input type="button" value="删除" onclick=del()><br>
    <!-- <div class="tcxx" id="stuts"></div>-->

    <input class='btn' type='button' value='openCustom' onclick='openCustom()'>

    <input class='btn' type='button' value='setCustomItems' onclick='setCustomItems()'>

    <input class='btn' type='button' value='closeCustom' onclick='closeCustom()'>

    <input class='btn' type='button' value='insertCustomItem' onclick='insertCustomItem()'>
    <input class='btn' type='button' value='deleteCustomItem' onclick='deleteCustomItem()'>
    <input class='btn' type='button' value='updateCustomItem' onclick='updateCustomItem()'>
    <input class="textbox" type="text" value="0" id = "index">
</div>
</body>
</html>
